---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getContentTypes } from '../../lib/payload';

const types = await getContentTypes();
const filteredTypes = types.docs.filter((type: any) => type.hasArchive !== false);
---

<BaseLayout title="Content Types" description="Browse all dynamic content archives.">
  <section class="py-16">
    <div class="container">
      <header class="mb-12 text-center">
        <h1 class="text-4xl font-bold">Content Types</h1>
        <p class="mt-4 text-lg text-gray-600 dark:text-gray-300">Browse all dynamic content archives.</p>
      </header>

      {filteredTypes.length === 0 && (
        <p class="text-center text-gray-500">No content types found.</p>
      )}
      {filteredTypes.length > 0 && (
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
          {filteredTypes.map((type: any) => (
            <a href={`/${(type.archiveSlug || `items/${type.slug}`).replace(/^\\/g, '')}`} class="block rounded-lg border border-gray-100 p-6 shadow-sm hover:shadow-md">
              <h2 class="text-xl font-semibold">{type.pluralLabel || type.name}</h2>
              {type.description && <p class="mt-2 text-sm text-gray-600 dark:text-gray-300">{type.description}</p>}
            </a>
          ))}
        </div>
      )}
    </div>
  </section>
</BaseLayout>
