@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===========================================
   Base Styles with Dark Mode Support
   =========================================== */

@layer base {
  :root {
    --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-serif: Georgia, Cambria, 'Times New Roman', Times, serif;
    --font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, monospace;
    
    /* Light mode colors */
    --color-background: 255 255 255;
    --color-foreground: 17 24 39;
    --color-muted: 107 114 128;
    --color-border: 229 231 235;
    --color-card: 255 255 255;
  }

  .dark {
    --color-background: 15 23 42;
    --color-foreground: 248 250 252;
    --color-muted: 148 163 184;
    --color-border: 51 65 85;
    --color-card: 30 41 59;
  }

  html {
    @apply scroll-smooth;
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  body {
    @apply bg-white text-gray-900 antialiased dark:bg-slate-900 dark:text-slate-100;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary-500;
  }
}

/* ===========================================
   Component Styles with Dark Mode
   =========================================== */

@layer components {
  /* Container */
  .container {
    @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-500;
  }

  .btn-secondary {
    @apply btn bg-gray-100 text-gray-900 hover:bg-gray-200 focus-visible:ring-gray-500 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600;
  }

  .btn-outline {
    @apply btn border border-gray-300 bg-transparent hover:bg-gray-50 focus-visible:ring-gray-500 dark:border-slate-600 dark:hover:bg-slate-800;
  }

  /* Cards */
  .card {
    @apply rounded-xl bg-white shadow-sm ring-1 ring-gray-200 dark:bg-slate-800 dark:ring-slate-700;
  }

  /* Links */
  .link {
    @apply text-primary-600 hover:text-primary-700 underline underline-offset-2 dark:text-primary-400 dark:hover:text-primary-300;
  }

  /* Prose/Rich Text with Dark Mode */
  .prose-custom {
    @apply prose prose-gray max-w-none dark:prose-invert;
    @apply prose-headings:font-bold prose-headings:tracking-tight;
    @apply prose-a:text-primary-600 prose-a:no-underline hover:prose-a:underline dark:prose-a:text-primary-400;
    @apply prose-img:rounded-lg;
    @apply prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded dark:prose-code:bg-slate-800;
    @apply prose-pre:bg-gray-900 dark:prose-pre:bg-slate-950;
  }
}

/* ===========================================
   Theme Toggle Component
   =========================================== */

.theme-toggle {
  @apply relative inline-flex h-10 w-10 items-center justify-center rounded-lg hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors;
}

.theme-toggle-icon {
  @apply h-5 w-5;
}

/* Sun icon - visible in dark mode */
.theme-toggle .sun-icon {
  @apply hidden dark:block;
}

/* Moon icon - visible in light mode */
.theme-toggle .moon-icon {
  @apply block dark:hidden;
}

/* ===========================================
   Template Styles with Dark Mode
   =========================================== */

/* Detail Template */
.detail-template {
  @apply container py-12;
}

.detail-header {
  @apply mb-8;
}

.detail-heading {
  @apply text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl;
}

.detail-subheading {
  @apply mt-4 text-xl text-gray-600 dark:text-slate-300;
}

.detail-meta {
  @apply mt-6 flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-slate-400;
}

.detail-author {
  @apply flex items-center gap-2;
}

.author-avatar {
  @apply h-10 w-10 rounded-full object-cover;
}

.detail-featured-image {
  @apply mb-8 overflow-hidden rounded-xl;
}

.detail-featured-image img {
  @apply h-auto w-full object-cover;
}

.detail-content-wrapper {
  @apply grid gap-12 lg:grid-cols-3;
}

.detail-main {
  @apply lg:col-span-2;
}

.detail-body {
  @apply prose prose-lg max-w-none dark:prose-invert;
}

.detail-sidebar {
  @apply space-y-8;
}

.detail-gallery {
  @apply mt-12;
}

.gallery-grid {
  @apply mt-4 grid gap-4 sm:grid-cols-2 lg:grid-cols-3;
}

.gallery-item {
  @apply overflow-hidden rounded-lg;
}

.gallery-item img {
  @apply h-48 w-full object-cover transition-transform hover:scale-105;
}

.detail-related {
  @apply mt-16 border-t border-gray-200 dark:border-slate-700 pt-12;
}

.related-grid {
  @apply mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3;
}

.related-item {
  @apply card overflow-hidden transition-shadow hover:shadow-md;
}

.related-item img {
  @apply h-40 w-full object-cover;
}

.related-item h3 {
  @apply p-4 font-medium text-gray-900 dark:text-white;
}

/* List Template */
.list-template {
  @apply container py-12;
}

.list-header {
  @apply mb-8;
}

.list-heading {
  @apply text-3xl font-bold tracking-tight text-gray-900 dark:text-white;
}

.list-items--grid {
  @apply grid gap-6 sm:grid-cols-2 lg:grid-cols-3;
}

.list-items--list {
  @apply space-y-4;
}

.list-item {
  @apply card overflow-hidden transition-shadow hover:shadow-md;
}

.list-item-link {
  @apply block;
}

.list-item-image img {
  @apply h-48 w-full object-cover;
}

.list-item-content {
  @apply p-4;
}

.list-item-title {
  @apply font-semibold text-gray-900 dark:text-white;
}

.list-item-excerpt {
  @apply mt-2 text-sm text-gray-600 dark:text-slate-300 line-clamp-2;
}

.list-pagination {
  @apply mt-12 flex items-center justify-center gap-4;
}

/* Landing Template */
.landing-template {
  @apply min-h-screen;
}

.landing-hero {
  @apply relative flex min-h-[60vh] items-center justify-center overflow-hidden bg-gray-900;
}

.hero-background {
  @apply absolute inset-0;
}

.hero-background img {
  @apply h-full w-full object-cover opacity-50;
}

.hero-overlay {
  @apply absolute inset-0 bg-gradient-to-t from-gray-900/80 to-transparent;
}

.hero-content {
  @apply relative z-10 px-4 text-center text-white;
}

.hero-heading {
  @apply text-4xl font-bold tracking-tight sm:text-5xl lg:text-6xl;
}

.hero-subheading {
  @apply mx-auto mt-6 max-w-2xl text-xl text-gray-300;
}

.hero-links {
  @apply mt-8 flex flex-wrap justify-center gap-4;
}

.hero-link {
  @apply btn;
}

.hero-link--primary {
  @apply btn-primary;
}

.hero-link--secondary {
  @apply bg-white/10 text-white hover:bg-white/20;
}

.landing-blocks {
  @apply space-y-0;
}

.landing-block {
  /* Blocks handle their own containers and spacing */
}

/* Article Template */
.article-template {
  @apply container py-12;
}

.article-header {
  @apply mx-auto max-w-3xl text-center;
}

.article-categories {
  @apply mb-4 flex flex-wrap justify-center gap-2;
}

.category-link {
  @apply rounded-full bg-primary-100 px-3 py-1 text-sm font-medium text-primary-700 hover:bg-primary-200 dark:bg-primary-900 dark:text-primary-300 dark:hover:bg-primary-800;
}

.article-heading {
  @apply text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl;
}

.article-meta {
  @apply mt-6 flex flex-wrap items-center justify-center gap-4 text-sm text-gray-500 dark:text-slate-400;
}

.article-featured-image {
  @apply mx-auto mt-8 max-w-4xl overflow-hidden rounded-xl;
}

.article-featured-image img {
  @apply h-auto w-full;
}

.article-layout {
  @apply mx-auto mt-12 grid max-w-4xl gap-12 lg:grid-cols-4;
}

.article-toc {
  @apply hidden lg:block;
}

.article-toc nav {
  @apply sticky top-24;
}

.article-toc h2 {
  @apply mb-4 text-sm font-semibold uppercase tracking-wide text-gray-500 dark:text-slate-400;
}

.article-toc ul {
  @apply space-y-2 text-sm;
}

.toc-item a {
  @apply text-gray-600 hover:text-gray-900 dark:text-slate-400 dark:hover:text-white;
}

.toc-item--level-3 {
  @apply pl-4;
}

.article-content {
  @apply prose prose-lg max-w-none dark:prose-invert lg:col-span-3;
}

.article-tags {
  @apply mx-auto mt-12 flex max-w-3xl flex-wrap items-center gap-2 border-t border-gray-200 dark:border-slate-700 pt-8;
}

.tags-label {
  @apply text-sm font-medium text-gray-500 dark:text-slate-400;
}

.tag-link {
  @apply rounded-full bg-gray-100 px-3 py-1 text-sm text-gray-700 hover:bg-gray-200 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600;
}

.article-related {
  @apply mt-16 border-t border-gray-200 dark:border-slate-700 pt-12;
}

.related-posts-grid {
  @apply mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-3;
}

.related-post-card {
  @apply card overflow-hidden transition-shadow hover:shadow-md;
}

.related-post-image {
  @apply h-40 w-full object-cover;
}

.related-post-content {
  @apply p-4;
}

.related-post-content h3 {
  @apply font-semibold text-gray-900 dark:text-white;
}

.related-post-content p {
  @apply mt-2 text-sm text-gray-600 dark:text-slate-300 line-clamp-2;
}

/* Timeline Template */
.timeline-template {
  @apply container py-12;
}

.timeline-header {
  @apply mb-12 text-center;
}

.timeline-heading {
  @apply text-3xl font-bold tracking-tight text-gray-900 dark:text-white;
}

.timeline-container {
  @apply relative mx-auto max-w-3xl;
}

.timeline-container::before {
  @apply absolute left-1/2 top-0 h-full w-0.5 -translate-x-1/2 bg-gray-200 dark:bg-slate-700;
  content: '';
}

.timeline-year-group {
  @apply relative;
}

.timeline-year-marker {
  @apply relative z-10 mx-auto mb-8 w-fit rounded-full bg-primary-600 px-4 py-2 text-sm font-bold text-white;
}

.timeline-events {
  @apply space-y-8;
}

.timeline-event {
  @apply relative flex items-start;
}

.timeline-event--left {
  @apply flex-row-reverse text-right;
}

.event-marker {
  @apply absolute left-1/2 top-4 h-4 w-4 -translate-x-1/2 rounded-full border-4 border-white dark:border-slate-900 bg-primary-500 shadow;
}

.event-card {
  @apply card w-5/12 p-4;
}

.event-date {
  @apply text-sm font-medium text-primary-600 dark:text-primary-400;
}

.event-title {
  @apply mt-1 font-semibold text-gray-900 dark:text-white;
}

.event-description {
  @apply mt-2 text-sm text-gray-600 dark:text-slate-300;
}

/* Home Template */
.home-template {
  @apply min-h-screen;
}

.home-hero {
  @apply relative flex min-h-[70vh] items-center justify-center overflow-hidden bg-gray-900;
}

.home-sections {
  @apply space-y-24 py-24;
}

.home-section {
  @apply container;
}

.section-header {
  @apply mb-8 text-center;
}

.section-header h2 {
  @apply text-3xl font-bold tracking-tight text-gray-900 dark:text-white;
}

.section-header p {
  @apply mt-2 text-lg text-gray-600 dark:text-slate-300;
}

.featured-grid {
  @apply grid gap-6 sm:grid-cols-2 lg:grid-cols-3;
}

.featured-item {
  @apply card overflow-hidden transition-shadow hover:shadow-md;
}

.featured-item--large {
  @apply sm:col-span-2 lg:col-span-2;
}

.featured-image img {
  @apply h-48 w-full object-cover;
}

.featured-item--large .featured-image img {
  @apply h-64;
}

.featured-content {
  @apply p-4;
}

.featured-category {
  @apply text-sm font-medium text-primary-600 dark:text-primary-400;
}

.featured-content h3 {
  @apply mt-1 font-semibold text-gray-900 dark:text-white;
}

.featured-content p {
  @apply mt-2 text-sm text-gray-600 dark:text-slate-300 line-clamp-2;
}

.section-cta {
  @apply mt-8 text-center;
}

/* Archive Template */
.archive-template {
  @apply container py-12;
}

.archive-header {
  @apply mb-8;
}

.archive-heading {
  @apply text-3xl font-bold tracking-tight text-gray-900 dark:text-white;
}

.archive-filters {
  @apply mb-8 flex flex-wrap items-center gap-4;
}

.filter-group {
  @apply flex items-center gap-2;
}

.filter-label {
  @apply text-sm font-medium text-gray-700 dark:text-slate-300;
}

.filter-select {
  @apply rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-800;
}

.archive-grid {
  @apply grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4;
}

.archive-item {
  @apply card overflow-hidden transition-shadow hover:shadow-md;
}

.archive-item-image img {
  @apply h-40 w-full object-cover;
}

.archive-item-content {
  @apply p-4;
}

.archive-item-title {
  @apply font-semibold text-gray-900 dark:text-white;
}

.archive-item-meta {
  @apply mt-1 text-sm text-gray-500 dark:text-slate-400;
}

.archive-pagination {
  @apply mt-12 flex items-center justify-center gap-2;
}

.pagination-btn {
  @apply rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium hover:bg-gray-50 dark:border-slate-600 dark:hover:bg-slate-800;
}

.pagination-btn--active {
  @apply bg-primary-600 text-white border-primary-600 hover:bg-primary-700;
}

/* ===========================================
   Custom Scrollbar with Dark Mode
   =========================================== */

::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:bg-slate-800;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full dark:bg-slate-600;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-slate-500;
}

/* ===========================================
   Preview Mode Banner
   =========================================== */

.preview-banner {
  @apply fixed top-0 left-0 right-0 z-50 bg-amber-500 px-4 py-2 text-center text-sm font-medium text-amber-900 shadow-md;
}

.preview-banner a {
  @apply ml-4 rounded bg-amber-700 px-3 py-1 text-xs text-white hover:bg-amber-800;
}

/* ===========================================
   Utility Classes
   =========================================== */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
